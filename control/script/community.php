<?
isset($_GET['action'])?$action=$_GET['action']:$action='list';
isset($_GET['section'])?$section=$_GET['section']:$section='list';
isset($_GET['id'])?$id=$_GET['id']:$id='0';
isset($_GET['page'])?$page=$_GET['page']:$page='1';isset($_GET['voucher_type'])?$voucher_type=$_GET['voucher_type']:$voucher_type='all';isset($_GET['category_id'])?$category_id=$_GET['category_id']:$category_id='';

#handle actions here.	switch ($action):
case'youtube':		$QueryObj = new query('youtube');		$QueryObj->AllowPaging=true;		$QueryObj->PageSize=ADMIN_CATEGORY_PAGE_SIZE;		$QueryObj->PageNo=isset($_GET['page'])?$_GET['page']:1;				$QueryObj->Where="where id!=''";		$QueryObj->DisplayAll();				// Update Active	               if(is_var_set_in_post('submit')):                        isset($_GET['page'])?$page=$_GET['page']:$page='1';                        if($page==1):                            $page_start=$page-1;                           else:                            $page_start=(($page-1)*ADMIN_CATEGORY_PAGE_SIZE);                           endif;                            $page_size=ADMIN_CATEGORY_PAGE_SIZE;                                                                          $query1= new query('youtube');                            $query1->Where="where id!='' LIMIT $page_start,$page_size";                                                    $array=$query1->ListOfAllRecords();                       								foreach($array as $key=>$val):                                     										$query_update = new query('youtube');                                        $query_update->Data['is_active']=0;                                        $query_update->Data['id']=$val['id'];                                        $query_update->Update();                                         								endforeach;                                                                                   foreach ($_POST['is_active'] as $k=>$v):                                        $q= new query('youtube');                                        $q->Data['is_active']=1;                                        $q->Data['id']=$k;                                        $q->Update();                                endforeach;				$admin_user->set_pass_msg('Operation has been performed successfully.');				Redirect(make_admin_url('community', 'youtube', 'youtube','page='.$page));					                endif;		break;		case'flickr':		$QueryObj = new query('flickr');		$QueryObj->AllowPaging=true;		$QueryObj->PageSize=ADMIN_CATEGORY_PAGE_SIZE;		$QueryObj->PageNo=isset($_GET['page'])?$_GET['page']:1;					$QueryObj->Where="where id!=''";		$QueryObj->DisplayAll();				// Update Active	               if(is_var_set_in_post('submit')):                                        $query= new query('flickr');                    $query->Data['is_active']='0';                    $query->UpdateCustom();                                        foreach ($_POST['is_active'] as $k=>$v):                            $q= new query('flickr');                            $q->Data['is_active']=1;                            $q->Data['id']=$k;                            $q->Update();                    endforeach;				$admin_user->set_pass_msg('Operation has been performed successfully.');				Redirect(make_admin_url('community', 'flickr', 'flickr'));					                endif;		break;				case'twitter':		$QueryObj = new query('twitter');		$QueryObj->AllowPaging=true;		$QueryObj->PageSize=ADMIN_CATEGORY_PAGE_SIZE;		$QueryObj->PageNo=isset($_GET['page'])?$_GET['page']:1;					$QueryObj->Where="where id!='' order by on_date desc";		$QueryObj->DisplayAll();				// Update Active	               if(is_var_set_in_post('submit')):                                            isset($_GET['page'])?$page=$_GET['page']:$page='1';                        if($page==1):                            $page_start=$page-1;                           else:                            $page_start=(($page-1)*ADMIN_CATEGORY_PAGE_SIZE);                           endif;                            $page_size=ADMIN_CATEGORY_PAGE_SIZE;                                                                          $query1= new query('twitter');                            $query1->Where=" where id!='' order by on_date desc LIMIT $page_start,$page_size";                                                    $array=$query1->ListOfAllRecords();                       								foreach($array as $key=>$val):                                     										$query_update = new query('twitter');                                        $query_update->Data['is_active']=0;                                        $query_update->Data['id']=$val['id'];                                        $query_update->Update();                                         								endforeach;                                                                                   foreach ($_POST['is_active'] as $k=>$v):                                        $q= new query('twitter');                                        $q->Data['is_active']=1;                                        $q->Data['id']=$k;                                        $q->Update();                                endforeach;				$admin_user->set_pass_msg('Operation has been performed successfully.');				Redirect(make_admin_url('community', 'twitter', 'twitter','page='.$page));					                endif;		break;		case'facebook':		$QueryObj = new query('facebook');		$QueryObj->AllowPaging=true;		$QueryObj->PageSize=ADMIN_CATEGORY_PAGE_SIZE;		$QueryObj->PageNo=isset($_GET['page'])?$_GET['page']:1;					$QueryObj->Where="where id!='' order by on_date desc";		$QueryObj->DisplayAll();				// Update Active	               if(is_var_set_in_post('submit')):                                            isset($_GET['page'])?$page=$_GET['page']:$page='1';                        if($page==1):                            $page_start=$page-1;                           else:                            $page_start=(($page-1)*ADMIN_CATEGORY_PAGE_SIZE);                           endif;                            $page_size=ADMIN_CATEGORY_PAGE_SIZE;                                                                          $query1= new query('facebook');                            $query1->Where=" where id!='' order by on_date desc LIMIT $page_start,$page_size";                                                    $array=$query1->ListOfAllRecords();                       								foreach($array as $key=>$val):                                     										$query_update = new query('facebook');                                        $query_update->Data['is_active']=0;                                        $query_update->Data['id']=$val['id'];                                        $query_update->Update();                                         								endforeach;                                                                                   foreach ($_POST['is_active'] as $k=>$v):                                        $q= new query('facebook');                                        $q->Data['is_active']=1;                                        $q->Data['id']=$k;                                        $q->Update();                                endforeach;				$admin_user->set_pass_msg('Operation has been performed successfully.');				Redirect(make_admin_url('community', 'facebook', 'facebook','page='.$page));					                endif;		break;		case'blog':		$QueryObj = new query('blog');		$QueryObj->AllowPaging=true;		$QueryObj->PageSize=ADMIN_CATEGORY_PAGE_SIZE;		$QueryObj->PageNo=isset($_GET['page'])?$_GET['page']:1;					$QueryObj->Where="where id!='' order by publish_date desc";		$QueryObj->DisplayAll();				// Update Active	               if(is_var_set_in_post('submit')):                                            isset($_GET['page'])?$page=$_GET['page']:$page='1';                        if($page==1):                            $page_start=$page-1;                           else:                            $page_start=(($page-1)*ADMIN_CATEGORY_PAGE_SIZE);                           endif;                            $page_size=ADMIN_CATEGORY_PAGE_SIZE;                                                                          $query1= new query('blog');                            $query1->Where=" where id!='' order by publish_date desc LIMIT $page_start,$page_size";                                                    $array=$query1->ListOfAllRecords();                       								foreach($array as $key=>$val):                                     										$query_update = new query('blog');                                        $query_update->Data['is_active']=0;                                        $query_update->Data['id']=$val['id'];                                        $query_update->Update();                                         								endforeach;                                                                                   foreach ($_POST['is_active'] as $k=>$v):                                        $q= new query('blog');                                        $q->Data['is_active']=1;                                        $q->Data['id']=$k;                                        $q->Update();                                endforeach;				$admin_user->set_pass_msg('Operation has been performed successfully.');				Redirect(make_admin_url('community', 'blog', 'blog','page='.$page));					                endif;		break;		
	default:break;
endswitch;
?>
